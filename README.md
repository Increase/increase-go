# Increase Go API Library

<a href="https://pkg.go.dev/github.com/increase/increase-go"><img src="https://pkg.go.dev/badge/github.com/increase/increase-go.svg" alt="Go Reference"></a>

The Increase Go library provides convenient access to the Increase REST
API from applications written in Go.

## Installation

Within a Go module, you can just import this package and let the Go compiler
resolve this module.

```go
import (
	"github.com/increase/increase-go" // imported as increase
)
```

Or, explicitly import this package with

```
go get -u 'github.com/increase/increase-go'
```

## Documentation

The API documentation can be found [here](https://increase.com/documentation).

## Usage

```go
package main

import (
  "fmt"
  "github.com/increase/increase-go"
  "github.com/increase/increase-go/options"
  "github.com/increase/increase-go/requests"
  "github.com/increase/increase-go/responses"
)

func main() {
  client := increase.NewIncrease()
  res, err := client.Accounts.New(requests.CreateAnAccountParameters{Name: fields.F("My First Increase Account")})
  if err != nil {
    panic(err)
  }
  fmt.Sprintf("%s", res)
}

```

### RequestOptions

This library uses the functional options pattern. `RequestOptions` are closures
that mutate a `RequestConfig`. These options can be supplied to the client or
at individual requests, and they will cascade appropriately.

For example:

```go
TODO
```

### Pagination

List methods in the GitHub API are paginated.

In addition to exposing standard response values, this library provides an
auto-paginating iterator with each list response, so you do not have to request
successive pages manually:

To iterate over all elements in a paginated list, we call the paginated
endpoint which returns a `Page`, then iterate while there is a `Next()`
element. When `Next()` is called, it will load the next element into
`Current()`, which is also aliased to the endpoint-specific name. If we are at
the end of the current page, `Next()` will fetch the next page.

```go
p, err := client.Users.List(context.TODO(), &types.ListUsersParams{})
if err != nil {
	return err
}
// Automatically fetches more pages as needed.
for p.Next() {
	user := p.User() // or p.Current()
	fmt.Printf("%s", user)
}
// If an error occurs while fetching a page, iteration will stop and p.Error() will have an error.
if p.Error() != nil {
	return p.Error()
}
```

#### JSONObject

There may be instances where we provide experimental or private API features
for some customers. In those cases, the related features will not be exposed to
the SDK as typed fields, and are instead deserialized to an internal map. We
provide methods to get and set these json fields in API objects.

```go
TODO
```

### Errors

For the errors generated by the SDK, we provide extra convenience methods for debugging.

### Middleware

You may apply any middleware you wish by overriding the `http.Client` with
`options.WithClient(client)`. An example of a basic logging middleware is given
below:

```go
// TODO: Make sure this actually works
type logger struct {}

func (l *logger) RoundTrip(req *http.Request) (*http.Response, error) {
	b, _ := httputil.DumpRequest(req, true)
	println(string(b))
	res, err := http.DefaultClient.RoundTrip(req)
	return res, err
}

options.WithClient(&http.Client{Transport: logger{}})
```

## Status

This package is in beta. Its internals and interfaces are not stable and
subject to change without a major semver bump; please reach out if you rely on
any undocumented behavior.

We are keen for your feedback; please email us at
[dev-feedback@increase.com](mailto:dev-feedback@increase.com) or open an issue with questions, bugs, or
suggestions.

## Requirements

This library requires Go 1.18+.